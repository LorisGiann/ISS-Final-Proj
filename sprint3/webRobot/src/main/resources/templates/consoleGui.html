<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>consoleGui</title>
    <link href=
    "https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src=
    "https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel=
    "shortcut icon" href="images/mbotIot.png" type="image/x-icon"> <!-- ICONA su browser -->

    <script>
        function setMessageToWindow(outfield, message) {
            var output = message.replace("\n","<br/>")
            outfield.innerHTML = `<tt>${output}</tt>`
        }

        const infoDisplay   = document.getElementById("display");

        function callServerUsingAjax(message) {
            $.ajax({
            type: "POST",
            url: "info",        //Dove  inviare i dati
            data: "info", 	  //Dati da inviare
            dataType: "html",
            success: function(msg){
                setMessageToWindow(infoDisplay,message)
            },
            error: function(){
                alert("Chiamata fallita, si prega di riprovare...");
            }
            });
        }

        function connect(){
        var host       =  document.location.host;
            var pathname =  "/"
            var addr     = "ws://" +host  + pathname + "socket"  ;
            // Assicura che sia aperta un unica connessione
            if(socket !== undefined && socket.readyState !== WebSocket.CLOSED){
                alert("WARNING: Connessione WebSocket gi√† stabilita");
            }
            socket = new WebSocket(addr);

            socket.onopen = function (event) {
                setMessageToWindow(infoDisplay,"Connected to " + addr);
            };

            socket.onmessage = function (event) {
                console.log("ws-status:" + `${event.data}`);
                console.log(""+`${event.data}`);
                setMessageToWindow(infoDisplay,""+`${event.data}`);
            };
        }//connect
</script>
</head>
<body>
    <div class="container-fluid pt-1 bg-primary text-white text-center">
        <h1>console</h1>
    </div>

    <div class="container-fluid">
        <div class="card iss-bg-robotarea text-dark">
            <div class="card-header px-1">Robot:</div>
              <div class="card-content px-1">
                <span id="Display" >...</span>
            </div>
          </div>
    </div>

    <footer>
        <!-- FOOTER -->
    </footer>
</body>
   
